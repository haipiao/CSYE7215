


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Java Serialization, Fixed in Akka 2.4.17 &mdash; Akka Documentation</title>
    
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/prettify.css" type="text/css" />
    <link rel="stylesheet" href="../_static/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.20',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/toc.js"></script>
    <script type="text/javascript" src="../_static/prettify.js"></script>
    <script type="text/javascript" src="../_static/highlightCode.js"></script>
    <script type="text/javascript" src="../_static/effects.core.js"></script>
    <script type="text/javascript" src="../_static/effects.highlight.js"></script>
    <script type="text/javascript" src="../_static/scrollTo.js"></script>
    <script type="text/javascript" src="../_static/contentsFix.js"></script>
    <script type="text/javascript" src="../_static/ga.js"></script>
    <script type="text/javascript" src="../_static/warnOldDocs.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Akka Documentation" href="../index.html" />
    <link rel="up" title="Security Announcements" href="index.html" />
    <link rel="next" title="Camel Dependency, Fixed in Akka 2.4.20" href="2017-08-09-camel.html" />
    <link rel="prev" title="Security Announcements" href="index.html" />


  </head>
  <body>
  <div class="navbar">
    <div class="navbar-inner">
      <div class="container">
        <div class="navbar-logo">
          <a href="http://akka.io"><img class="svg-logo" src="../_static/akka_full_color.svg" /></a>
        </div>
        <ul class="nav">
          <li><a href="http://akka.io/docs">Documentation</a></li>
          <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
          <li><a href="http://akka.io/downloads">Download</a></li>
          <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
          <li><a href="http://github.com/akka/akka">Code</a></li>
          <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="main">
    <div class="container">
      <div class="page-title">Java Serialization, Fixed in Akka 2.4.17 - Version 2.4.20</div>
      <div class="pdf-link"><a href="../AkkaScala.pdf" title="Akka Scala Documentation"><img src="../_static/pdf-scala-icon.png" style="height: 40px;" /></a></div>
      <div class="pdf-link"><a href="../AkkaJava.pdf" title="Akka Java Documentation"><img src="../_static/pdf-java-icon.png" style="height: 40px;" /></a></div>
    </div>
    <div class="main-container">
      <div class="container">
        <div class="row">
          <div class="span12">
            <div class="breadcrumb">
              <div style="position: relative">
                <input type="search" id="search" class="form-control" style="position: relative" placeholder="Search in the doc" />
              </div>
              <div>
                <div>
                  <span class="divider">«</span> <a href="index.html">Security Announcements</a> <span class="divider">|</span>
                </div>
                <div>
                  <a href="../java.html">Java Contents</a> <span class="divider">|</span> <a href="../scala.html">Scala Contents</a>
                </div>
                <div>
                  <span class="divider">|</span> <a href="2017-08-09-camel.html">Camel Dependency, Fixed in Akka 2.4.20</a> <span class="divider">»</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row"><div class="span9">
            
  <div class="section" id="java-serialization-fixed-in-akka-2-4-17">
<h1>Java Serialization, Fixed in Akka 2.4.17</h1>
<div class="section" id="date">
<h2>Date</h2>
<p>10 Feburary 2017</p>
<div class="section" id="description-of-vulnerability">
<h3>Description of Vulnerability</h3>
<p>An attacker that can connect to an <tt class="docutils literal"><span class="pre">ActorSystem</span></tt> exposed via Akka Remote over TCP can gain remote code execution
capabilities in the context of the JVM process that runs the ActorSystem if:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">JavaSerializer</span></tt> is enabled (default in Akka 2.4.x)</li>
<li>and TLS is disabled <em>or</em> TLS is enabled with <tt class="docutils literal"><span class="pre">akka.remote.netty.ssl.security.require-mutual-authentication</span> <span class="pre">=</span> <span class="pre">false</span></tt>
(which is still the default in Akka 2.4.x)</li>
<li>or if TLS is enabled with mutual authentication and the authentication keys of a host that is allowed to connect have been compromised, an attacker gained access to a valid certificate (e.g. by compromising a node with certificates issued by the same internal PKI tree to get access of the certificate)</li>
<li>regardless of whether <tt class="docutils literal"><span class="pre">untrusted</span></tt> mode is enabled or not</li>
</ul>
<p>Java deserialization is <a class="reference external" href="https://community.hpe.com/t5/Security-Research/The-perils-of-Java-deserialization/ba-p/6838995">known to be vulnerable</a> to attacks when attacker can provide arbitrary types.</p>
<p>Akka Remoting uses Java serialiser as default configuration which makes it vulnerable in its default form. The documentation of how to disable Java serializer was not complete. The documentation of how to enable mutual authentication was missing (only described in reference.conf).</p>
<p>To protect against such attacks the system should be updated to Akka <cite>2.4.17</cite> or later and be configured with
<a class="reference internal" href="../scala/remoting.html#disable-java-serializer-scala"><em>disabled Java serializer</em></a>. Additional protection can be achieved when running in an
untrusted network by enabling <a class="reference internal" href="../scala/remoting.html#remote-tls-scala"><em>TLS with mutual authentication</em></a>.</p>
<p>Please subscribe to the <a class="reference external" href="https://groups.google.com/forum/#!forum/akka-security">akka-security</a> mailing list to be notified promptly about future security issues.</p>
</div>
<div class="section" id="severity">
<h3>Severity</h3>
<p>The <a class="reference external" href="https://en.wikipedia.org/wiki/CVSS">CVSS</a> score of this vulnerability is 6.8 (Medium), based on vector <a class="reference external" href="https://nvd.nist.gov/cvss.cfm?calculator&amp;version=2&amp;vector=(AV:A/AC:M/Au:N/C:C/I:C/A:C/E:F/RL:TF/RC:C)">AV:A/AC:M/Au:N/C:C/I:C/A:C/E:F/RL:TF/RC:C</a>.</p>
<p>Rationale for the score:</p>
<ul class="simple">
<li>AV:A - Best practice is that Akka remoting nodes should only be accessible from the adjacent network, so in good setups, this will be adjacent.</li>
<li>AC:M - Any one in the adjacent network can launch the attack with non-special access privileges.</li>
<li>C:C, I:C, A:C - Remote Code Execution vulnerabilities are by definition CIA:C.</li>
</ul>
</div>
<div class="section" id="affected-versions">
<h3>Affected Versions</h3>
<ul class="simple">
<li>Akka <cite>2.4.16</cite> and prior</li>
<li>Akka <cite>2.5-M1</cite> (milestone not intended for production)</li>
</ul>
</div>
<div class="section" id="fixed-versions">
<h3>Fixed Versions</h3>
<p>We have prepared patches for the affected versions, and have released the following versions which resolve the issue:</p>
<ul class="simple">
<li>Akka <cite>2.4.17</cite> (Scala 2.11, 2.12)</li>
</ul>
<p>Binary and source compatibility has been maintained for the patched releases so the upgrade procedure is as simple as changing the library dependency.</p>
<p>It will also be fixed in 2.5-M2 or 2.5.0-RC1.</p>
</div>
<div class="section" id="acknowledgements">
<h3>Acknowledgements</h3>
<p>We would like to thank Alvaro Munoz at Hewlett Packard Enterprise Security &amp; Adrian Bravo at Workday for their thorough investigation and bringing this issue to our attention.</p>
</div>
</div>
</div>


          </div>
          <div class="span3"><p class="contents-title">Contents</p>
              <div id="scroller-anchor">
                <div id="scroller">
                  <div id="toc"></div>
                </div>
              </div></div>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
  <div class="container">
    <ul>
      <li><h5>Akka</h5></li>
      <li><a href="http://akka.io/docs">Documentation</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/additional/faq.html">FAQ</a></li>
      <li><a href="http://akka.io/downloads">Downloads</a></li>
      <li><a href="http://akka.io/news">News</a></li>
      <li><a href="http://letitcrash.com">Blog</a></li>
    </ul>
    <ul>
      <li><h5>Contribute</h5></li>
      <li><a href="http://akka.io/community">Community Projects</a></li>
      <li><a href="http://github.com/akka/akka">Source Code</a></li>
      <li><a href="http://groups.google.com/group/akka-user">Mailing List</a></li>
      <li><a href="http://doc.akka.io/docs/akka/current/project/issue-tracking.html">Report a Bug</a></li>
    </ul>
    <ul>
      <li><h5>Company</h5></li>
      <li><a href="http://www.lightbend.com/how/subscription">Commercial Support</a></li>
      <li><a href="http://akka.io/team">Team</a></li>
      <li><a href="mailto:info@lightbend.com">Contact</a></li>
    </ul>
    <ul>
      <li><img src="../_static/akka_icon_reverse.svg" align="center"/></li>
    </ul>
  </div>
  <div class="container copyright">
    <p style="float: left;">
      © 2015 <a href="http://www.lightbend.com/">Lightbend Inc.</a> <span class="license">Akka is Open Source and available under the Apache 2 License.</span>
    </p>
    <p style="float: right; font-size: 12px;">
      Last updated: Aug 10, 2017
    </p>
  </div>
</div>
<script type="text/javascript">
  var $toc = $('#toc');
  $toc.toc();

  // show clickable section sign when section header hovered:
  $('.section h2,.section h3,.section h4,.section h5').each(function(i, el) {
      var $el = $(el);
      $el.prepend($("<a class='section-marker' href='#" + $el.attr("id") + "'>&sect;</a>"))
  });
</script>

<!-- Algolia docs search -->
<script type="text/javascript">
  var version = DOCUMENTATION_OPTIONS.VERSION;

  var lang = "scala";
  var path = window.location.pathname;
  if (path.includes("/java/") || path.includes("java.html")) lang = "java";

  console.log("Search configured for:", lang, "@", version);

  docsearch({
    apiKey: '543bad5ad786495d9ccd445ed34ed082',
    indexName: 'akka_io',
    inputSelector: '#search',
    algoliaOptions: {
      hitsPerPage: 5,
      facetFilters: '[' + '["language:' + lang + '","language:general"]' + ',"version:' + version + '"]'
    }
  });

  // set up "/" as global shortcut for focusing on search
  $(document).keypress(function (event) {
    if (event.keyCode == 47) {
      $("#q").focus();
      return false; // swallow key event, otherwise the / char would be input into the search box
    }
  });
</script>

  

  </body>
</html>